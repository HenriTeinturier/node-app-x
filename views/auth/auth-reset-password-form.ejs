<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="/javascripts/auth/auth-reset-password.js"></script>

<main class="signup-section">
  <h1>Réinitialisation du mot de passe</h1>

  <!-- gestion des erreurs -->
  <% if (errors) { %>
  <div class="error-message">
    <% if (Array.isArray(errors)) { %> <% errors.forEach(function (err) { %>
    <p class="error-text"><%= err %></p>
    <% }); %> <% } else { %>
    <p class="error-text"><%= errors %></p>
    <% } %>
  </div>
  <% } %>

  <!-- formulaire de réinitialisation -->
  <form action="/users/reset-password" method="POST" class="signup-form">
    <input type="hidden" name="userId" value="<%= userId %>" />
    <input
      type="hidden"
      name="passwordResetToken"
      value="<%= passwordResetToken %>"
    />

    <label for="password">Nouveau mot de passe</label>
    <input
      type="password"
      id="password"
      name="password"
      placeholder="Entrez votre nouveau mot de passe"
      required
    />

    <label for="confirmPassword">Confirmer le mot de passe</label>
    <input
      type="password"
      id="confirmPassword"
      name="confirmPassword"
      placeholder="Confirmez votre nouveau mot de passe"
      required
    />

    <button type="submit" class="signin-button">
      Réinitialiser le mot de passe
    </button>

    <!-- Lien retour connexion -->
    <a href="/auth/signin/form" class="forgot-password"
      >Retour à la connexion</a
    >
  </form>
</main>
